[TOC]



### 加载和切换场景

在Cocos Creator中，我们使用场景文件（不包含扩展名）来索引指代场景。

```javascript
cc.director.loadScene("MyScene");
```

### 常驻节点

引擎同时只会运行一个场景，当切换场景是，默认会将场景内所有节点和其他实力销毁。如果我们需要用一个组件控制所有场景的加载，或者在场景之间传递参数数据，就需要将该组件所在节点标记为==常驻节点==，使它在场景切换时不被自动销毁，常驻内存。

```
cc.game.addPersistRooNode(myNode);
```

使用上面的接口将myNode变为常驻节点，这样挂在上面的组件都可以在场景之间持续作用，我们可以用这样的方法来储存玩家信息，或者下一个场景初始化时需要的各种数据。

```javascript
cc.game.removePersistRootNode(myNode)；
```

上面代码并不会立即销毁指定节点，只是将节点还原为可在场景切换时销毁的节点。不过一些相对简单的数据，也可以使用全局变量进行传递和使用。

### 场景加载回调

加载场景时，可以附加一个参数用来指定场景加载后的回调函数

```javascript
cc.direcotor.loadScene("MyScenen",onSceneLaunched);
```

上一行里onSceneLaunched就是声明在本脚本中的一个回调函数，在场景加载后可以用来进一步的进行初始化或数据传递的操作，由于回调函数只能写在本脚本中，所有场景加载通常用来配合常驻节点，在常驻节点上挂载的脚本中使用。

### 预加载场景

cc.director.loadScene 会在加载场景之后自动切换运行新场景，有些时候我们需要在后台静默加载新场景，并在加载完成后手动进行切换。那就可以预先使用preloadScene接口对场景进行预加载

```javascript
cc.director.preloadScene("table",function(){
	cc.log("Next scene preloaded");
})
```

之后在合适的时间使用loadScene，就可以这真正切换场景，就算预加载还没完成，你也可以直接调用loadScene，预加载完成后场景就会启动。

